{% extends "blog/base.html" %}
{% block title %}Home - The Byline{% endblock %}


{%block nav%}


<!-- Navigation Section -->
<nav id="main-navbar" class="hidden md:block bg-white border-b border-gray-200 sticky top-0 z-40"
  style="box-shadow:6px 4px 20px 0px rgb(0 0 0 / 0.20)">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-around py-2">
      <!-- Search Bar -->
      <div class="flex items-center space-x-6">
        <div class="relative">
          <form method="GET" action="{% url 'home' %}" class="relative max-w-xs hidden md:flex">

            <input id="searchBox" type="text" name="q" placeholder="Search" value="{{ search_query }}"
              class="pl-10 pr-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300" />
            <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-black w-4 h-4" fill="none"
              stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </form>

          <div id="liveResults" class="absolute bg-white shadow-md rounded z-50"></div>
        </div>
      </div>




      <!-- Navigation Links -->
      <div class="flex items-center space-x-8" style="margin-right:7rem;">
        <a href="{% url 'home' %}"
          class="{% if request.path == '/' %}text-red-600 {% else %}text-black{% endif %} hover:text-red-600 transition-colors group relative">
          Home
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a>

         <div class="relative group">
          <button
            class="{% if request.path == '/category/politics/' or request.path == '/category/national/' or request.path == '/category/state/' or request.path == '/category/elections/' or request.path == '/category/global/' %}text-red-600 font-semibold{% else %}text-black {% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'politics' %}"
              class="hover:text-red-600 font-medium transition-colors relative">Politics
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>
            
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'national' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">National
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'state' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">State
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'elections' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Elections
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'global' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Global
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>

            </div>
          </div>
        </div>

        <div class="relative group">
          <button
            class="{% if request.path == '/category/business/' or request.path == '/category/corporates/' or request.path == '/category/smes/' or request.path == '/category/b-ipo/' or request.path == '/category/startups/' %}text-red-600 font-semibold{% else %}text-black {% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'business' %}"
              class="hover:text-red-600 font-medium transition-colors relative">Business
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>
            
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'corporates' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Corporates
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'smes' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">SMEs
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'startups' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Startups
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>

            </div>
          </div>
        </div>

        <!-- <a href="{% url 'category_articles' 'business'  %}"
          class="{% if request.path == '/category/market/' or request.path == '/category/gold/' or request.path == '/category/business/' %}text-red-600 font-semibold{% else %}text-black {% endif %} hover:text-red-600 font-medium transition-colors group relative">Business
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a> -->

        <div class="relative group">
          <button
            class="{% if request.path == '/category/finance/' or request.path == '/category/stock market/' or request.path == '/category/mutual funds/' or  request.path == '/category/ipo/' or request.path == '/category/policy/' or request.path == '/category/budget/' or request.path == '/category/taxation/' or request.path == '/category/economy/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'finance' %}"
              class="hover:text-red-600 font-medium transition-colors relative">Finance
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>

            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'stock market' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Stock
                Market
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'mutual funds' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Mutual
                Funds
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'ipo' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">IPO
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'economy' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Economy
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'policy' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Policy
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'budget' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Budget
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'taxation' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Taxation
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>

            </div>
          </div>
        </div>

        <div class="relative group">
          <button
            class="{% if request.path == '/category/technology/' or request.path == '/category/ai/' or request.path == '/category/fintech/' or  request.path == '/category/gadgets/' or request.path == '/category/social media/' or request.path == '/category/cyber security/'%}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'technology' %}"
              class="hover:text-red-600 font-medium transition-colors relative">Tech
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>

            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'ai' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">AI
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'fintech' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Fintech
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'gadgets' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Gadgets
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'social media' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Social
                media
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'cyber security' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Cyber
                security
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>


            </div>
          </div>
        </div>

        <!-- <a href="{% url 'category_articles' 'economy' %}"
          class="{% if request.path == '/category/economy/' %}:text-red-600 font-semibold{% else %}text-black{% endif %}hover:text-red-600 font-medium transition-colors group relative">Economy
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a> -->

        <div class="relative group">
          <button
            class="{% if request.path == '/category/sports/' or request.path == '/category/cricket/' or request.path == '/category/football/' or  request.path == '/category/tennis/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'sports' %}"
              class="hover:text-red-600 font-medium transition-colors relative">Sports
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'cricket' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Cricket
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'football' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Football
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'tennis' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Tennis
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
            </div>
          </div>
        </div>


        <div class="relative group">
          <button
            class="{% if request.path == '/category/entertainment/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">
            <a href="{% url 'category_articles' 'entertainment' %}"
              class="hover:text-red-600 font-medium transition-colors relative"> Entertainment
              <span
                class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
            </a>
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
        </div>

        <div class="relative group">
          <button
            class="{% if request.path == '/category/banking/' or  request.path == '/category/defense/' or request.path == '/category/aviation' or request.path == '/category/hospitality' or request.path == '/category/real estate' or request.path == '/category/space/' or request.path == '/category/automobiles/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">Sectors
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'banking' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Banking
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'defense' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Defense
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'aviation' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Aviation
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'hospitality' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Hospitality
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'real estate' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Real
                Estate
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'space' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Space
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'automobiles' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Automobiles
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
            </div>
          </div>
        </div>

      </div>


      <div style="margin-right:4rem; text-align: center;">
     <a href="/podcasts" class="podcast-link" style="
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: linear-gradient(to right, #ff0000, #000000);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
    cursor: pointer;
">
    <!-- Mic SVG -->
    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" width="20" height="20">
        <path d="M12 14a3 3 0 0 0 3-3V5a3 3 0 0 0-6 0v6a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 14 0h-2zM12 17v4m-4 0h8"/>
    </svg>

    Podcast

    <!-- Underline -->
    <span style="
        position: absolute;
        left: 0;
        bottom: 0;
        height: 2px;
        width: 100%;
        background-color: #ff0000;
        display: block;
        z-index: 10;
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
    "></span>
</a>




    </div>
  </div>
</nav>
{%endblock%}
{% block content %}

<!-- 🏏 Live Scores at Top -->
<!-- <section class="mb-10">
  <h2 class="text-xl font-bold text-gray-800 font-merriweather mb-4">🏏 Live Cricket Scores</h2>
  <div id="cricket-live" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-700 font-roboto">
    <p>Loading scores...</p>
  </div>
</section> -->

<!-- ✅ Thank You Message for Newsletter -->
{% if messages %}
{% for message in messages %}
<div id="message-container" class="mb-4 px-4 py-3 bg-red-100 text-black rounded-lg shadow-sm">
  {{ message }}
</div>
{% endfor %}
{% endif %}


<!-- 📄 Main grid layout -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-10">

  <!-- 📄 LEFT: News and Search -->
  <div class="{% if opinion_articles %}lg:col-span-2{% else %}lg:col-span-3{% endif %}">
    {% if search_query %}
    <!-- 🔍 Search Result Block -->
     <h4 class="text-xl font-medium text-gray-500 mb-6 border-b-2 border-[#BA0000] pb-2">
      Articles related to : <span class="text-black">{{ search_query }}</span>
    </h2>

    {% if articles %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 gap-6">
      {% for article in articles %}
      <div class="relative bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition duration-300 flex flex-col sm:flex-row">
        {% if article.image %}
        <div class="flex flex-col justify-center">
          <img src="{{ article.image.url }}" class="w-full h-48 object-contain" />
          <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ article.image_credit }}</div>
        </div>
        {% endif %}

        {% if article.is_opinion  %}
            <span class="absolute bottom-0 right-0 bg-black text-white text-xs font-semibold px-3 py-1 rounded-tl-lg">
              opinion
            </span>
          {% endif %}

        <div class="p-4">
          <h3 class="text-lg font-semibold text-gray-900 font-bold hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=article.slug %}">{{ article.title|safe }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-2">{{ article.summary|safe }}</p>
          
          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-4 font-roboto ">
            {% if article.authorImage %}
            <img src="{{ article.authorImage.url }}" alt="{{ article.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span>•</span>
            <span class="text-gray-800">{{ article.author|safe|capfirst }}</span>
            <span>•</span>
            <span>{{ article.created_at|date:"F j, Y" }}</span>
          </div>


          <a href="{% url 'article_detail' slug=article.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-3 inline-block">
            Read more →
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-gray-500 text-sm mt-4">No results found. Try a different keyword.</p>
    {% endif %}

    {% else %}
    <!-- 📰 LATEST NEWS section from category-wise featured -->
    <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b-2 border-red-600 pb-2">
      Latest News
    </h2>

    {% comment %} First recent article (full width) {% endcomment %}
    {% for article in recent_articles %}
    {% if forloop.first %}
    <div class="mb-6">
      <div
        class="bg-white shadow rounded-xs overflow-hidden hover:shadow-lg transition duration-300 flex flex-col sm:flex-row relative">
        {% if article.image %}
          <div class="flex flex-col justify-center w-full sm:w-[30rem] md:w-[50rem] lg:w-[70rem]">
            <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-64 object-contain">
            <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ article.image_credit }}</div>
          </div>
        {% endif %}
        <div class="p-6">
          
          {% if article.category %}
          <span class="absolute top-0 left-0 bg-red-600 text-white text-xs font-semibold px-3 py-1 rounded-br-lg">
            {{ article.category.name|safe|capfirst }}
          </span>
          {% endif %}

          {% if article.is_opinion  %}
          <span class="absolute bottom-0 right-0 bg-black text-white text-xs font-semibold px-3 py-1 rounded-tl-lg">
            opinion
          </span>
          {% endif %}
          
          <h3 class="text-2xl font-semibold text-gray-900 font-bold hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=article.slug %}">{{ article.title|safe }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-3">{{ article.summary|safe }}</p>
          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-2 font-roboto ">
            {% if article.authorImage %}
            <img src="{{ article.authorImage.url }}" alt="{{ article.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span>•</span>
            <span class="text-gray-800">{{ article.author|safe|capfirst }}</span>
            <span>•</span>
            <span>{{ article.created_at|date:"F j, Y" }}</span>
          </div>

          <a href="{% url 'article_detail' slug=article.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-4 inline-block">
            Read more →
          </a>
        </div>
      </div>
    </div>
    {% endif %}
    {% endfor %}

    <!-- Next 3 recent articles in grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6  {% if opinion_articles %}md:w-[77rem] mx-auto mt-16{% endif %}">
      {% for article in recent_articles %}
      {% if not forloop.first %}
      <div class="bg-white shadow rounded-xs overflow-hidden hover:shadow-lg transition duration-300 relative">
        {% if article.image %}
        <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-48 object-contain">
        <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ article.image_credit }}</div>
        {% endif %}
        
        
        {% if article.category %}
        <span class="absolute top-0 left-0 bg-red-600 text-white text-xs font-semibold px-3 py-1 rounded-br-lg">
          {{ article.category.name|safe|capfirst }}
        </span>
        {% endif %}

        {% if article.is_opinion  %}
          <span class="absolute bottom-0 right-0 bg-black text-white text-xs font-semibold px-3 py-1 rounded-tl-lg">
            opinion
          </span>
        {% endif %}
        
        <div class="p-4">
          <h3 class="text-lg font-semibold text-gray-900 font-bold hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=article.slug %}">{{ article.title|safe }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-2">{{ article.summary|safe }}</p>

          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-2 font-roboto ">
            {% if article.authorImage %}
            <img src="{{ article.authorImage.url }}" alt="{{ article.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span>•</span>
            <span class="text-gray-800">{{ article.author|safe|capfirst }}</span>
            <span>•</span>
            <span>{{ article.created_at|date:"F j, Y" }}</span>
          </div>

          <a href="{% url 'article_detail' slug=article.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-3 inline-block">
            Read more →
          </a>
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>

  <!-- 🗂️ CATEGORY SECTIONS -->
  {% for category, data in category_articles.items %}
  <section class="mt-10 mb-12">
    <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b-2 border-[#BA0000] pb-2">
      <a href="{% url 'category_articles' category.name %}" class="hover:text-red-600">
        {{ category.name|safe|capfirst }}
      </a>
    </h2>

    <!-- Featured full-width article -->
    <div class="mb-6">
      <div
        class="relative bg-white shadow rounded-xs overflow-hidden hover:shadow-lg transition duration-300 flex flex-col sm:flex-row">
        {% if data.featured.image %}
        <div class="flex flex-col justify-center" style="width:23rem;">
          <img src="{{ data.featured.image.url }}" alt="{{ data.featured.title }}" class="w-full h-64 object-contain" />
          <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ data.featured.image_credit }}</div>
        </div>
        {% endif %}

        {% if data.featured.is_opinion  %}
            <span class="absolute bottom-0 right-0 bg-black text-white text-xs font-semibold px-3 py-1 rounded-tl-lg">
              opinion
            </span>
        {% endif %}

        <div class="p-6 sm:w-2/3">
          <h3 class="text-2xl font-semibold text-gray-900 font-bold hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=data.featured.slug %}">{{ data.featured.title|safe }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-3">{{ data.featured.summary|safe }}</p>
          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-2 font-roboto ">
            {% if data.featured.authorImage %}
            <img src="{{ data.featured.authorImage.url }}" alt="{{ article.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span>•</span>
            <span class="text-gray-800">{{ data.featured.author|safe|capfirst }}</span>
            <span>•</span>
            <span>{{ data.featured.created_at|date:"F j, Y" }}</span>
            <!-- {% if data.featured.category %}
            <span>•</span>
            <span class="bg-red-600 text-white px-2 py-0.5 rounded-full text-xs uppercase tracking-wide font-semibold">
              {{ data.featured.category }}
            </span>
            {% endif %} -->
          </div>
          
          <a href="{% url 'article_detail' slug=data.featured.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-4 inline-block">
            Read more →
          </a>
        </div>
      </div>
    </div>

    <!-- Other articles in grid -->
    {% if data.others %}
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 {% if opinion_articles %}md:w-[77rem] mx-auto{% endif %}">
      {% for article in data.others %}
      <div class="relative bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition duration-300">
        {% if article.image %}
        <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-48 object-contain">
        <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ article.image_credit }}</div>
        {% endif %}

        {% if article.is_opinion  %}
            <span class="absolute bottom-0 right-0 bg-black text-white text-xs font-semibold px-3 py-1 rounded-tl-lg">
              opinion
            </span>
        {% endif %}

        <div class="p-4">
          <h3 class="text-lg font-semibold text-gray-900 font-bold hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=article.slug %}">{{ article.title|safe }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-2">{{ article.summary|safe }}</p>
          
          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-3 font-roboto ">
            {% if article.authorImage %}
            <img src="{{ article.authorImage.url }}" alt="{{ article.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span>•</span>
            <span class="text-gray-800">{{ article.author|safe|capfirst }}</span>
            <span>•</span>
            <span>{{ article.created_at|date:"F j, Y" }}</span>
            <!-- {% if data.featured.category %}
            <span>•</span>
            <span class="bg-red-600 text-white px-2 py-0.5 rounded-full text-xs uppercase tracking-wide font-semibold">
              {{ data.featured.category }}
            </span>
            {% endif %} -->
          </div>
          
          <a href="{% url 'article_detail' slug=article.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-3 inline-block">
            Read more →
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  </section>
  {% endfor %}
  {% endif %}
</div>

<!-- 🧠 RIGHT: Opinions Sidebar -->
{% if opinion_articles %}
  <div>
    <h2 class="text-3xl font-bold mb-[1.5rem] border-b-2 border-red-600 pb-2">Opinion Articles</h2>
  
    <div class="max-h-[370px] overflow-y-auto pr-2 space-y-4  bg-[#f4f4f4] p-4 rounded-xs shadow hover:shadow-md transition">
      {% for opinion in opinion_articles %}
      <div class="bg-[#f4f4f4] p-4 flex items-center gap-4 border-b">
<!--         {% if opinion.authorImage %}
        <img src="{{ opinion.authorImage.url }}" alt="{{ opinion.author }}" class="w-12 h-12 rounded-full object-contain">
        {% endif %} -->
        <img src="{{ opinion.image.url }}" alt="{{ opinion.author }}" class="w-12 h-12 rounded-full object-cover">
        <a href="{% url 'article_detail' slug=opinion.slug %}">
          <h4 class="font-semibold text-gray-900 hover:text-red-600">{{ opinion.title|safe }}</h4>
          <p class="text-sm text-gray-500 mb-1">{{ opinion.author|safe|capfirst }}</p>
          <p class="text-sm text-gray-600">{{ opinion.snippet|safe|truncatewords:15 }}</p>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
{% endif %}
</div> <!-- End of main grid -->




<!-- 💌 Newsletter Form (Centered) -->
<!-- <section id="subscribe" class="bg-gray-100 py-10 px-6 rounded-lg mt-16 max-w-4xl mx-auto text-center">
  <h2 class="text-2xl font-semibold mb-4 text-gray-900 font-merriweather">
    Get the best of Business & Sports in your inbox.
  </h2>

  <form method="POST" class="flex flex-col sm:flex-row items-center justify-center gap-4 max-w-md mx-auto mb-6">
    {% csrf_token %}
    <input type="email" name="email" placeholder="Enter your email" required
      class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring focus:border-blue-400">
    <button type="submit"
      class="hover:bg-white bg-byline-yellow text-white hover:text-byline-yellow font-semibold py-2 px-6 rounded-md">
      Subscribe
    </button>
  </form>

  <ul class="flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-6 text-sm text-gray-700">
    <li><strong>Weekly summaries</strong></li>
    <li><strong>Hand-picked reads</strong></li>
    <li><strong>No spam, Ever</strong></li>
  </ul>
</section> -->

<!-- 🏏 Cricket Scores Script -->
<!-- <script>
  let apiCallCount = 0;
  let hasFetchedOnce = false;

  async function fetchCricketLiveScores(force = false) {
    if (hasFetchedOnce && !force) return;
    apiCallCount++;
    hasFetchedOnce = true;

    try {
      const res = await fetch("https://cricbuzz-cricket.p.rapidapi.com/matches/v1/live", {
        method: "GET",
        headers: {
          "X-RapidAPI-Key": "{{crick_key}}",
          "X-RapidAPI-Host": "cricbuzz-cricket.p.rapidapi.com"
        }
      });

      const data = await res.json();
      const container = document.getElementById("cricket-live");
      container.innerHTML = "";

      const matches = data.typeMatches?.[0]?.seriesMatches?.flatMap(series =>
        series.seriesAdWrapper?.matches || []
      ).slice(0, 4);

      if (!matches?.length) {
        container.innerHTML = "<p>No live matches right now.</p>";
        return;
      }

      matches.forEach(match => {
        const info = match.matchInfo;
        const score = match.matchScore;

        const team1 = info?.team1?.teamName || "Team A";
        const team2 = info?.team2?.teamName || "Team B";
        const venue = info?.venueInfo?.ground || "Unknown venue";
        const status = score?.status || "Live";

        const t1Score = score?.team1Score?.inngs1;
        const t2Score = score?.team2Score?.inngs1;

        const formatScore = s => s ? `${s.runs}/${s.wickets} (${s.overs} ov)` : "N/A";

        const el = document.createElement("div");
        el.className = "border p-3 rounded bg-gray-50 shadow-sm";

        el.innerHTML = `
        <div class="font-semibold text-gray-800">${team1} vs ${team2}</div>
        <div class="text-sm text-gray-600 mb-1">${venue}</div>
        <div class="text-sm">
          <span class="font-medium text-blue-700">${team1}:</span> ${formatScore(t1Score)}<br>
          <span class="font-medium text-blue-700">${team2}:</span> ${formatScore(t2Score)}
        </div>
        <div class="mt-1 text-xs text-green-600 font-semibold">${status}</div>
      `;
        container.appendChild(el);
      });

    } catch (err) {
      console.error("API Error:", err);
      document.getElementById("cricket-live").innerHTML = "<p class='text-red-600'>Unable to fetch scores.</p>";
    }
  }

  function isVisible(elem) {
    const rect = elem.getBoundingClientRect();
    return rect.top < window.innerHeight && rect.bottom > 0;
  }

  function checkAndFetchOnce() {
    const block = document.getElementById("cricket-live");
    if (block && isVisible(block)) {
      fetchCricketLiveScores();
      window.removeEventListener("scroll", checkAndFetchOnce);
    }
  }

  window.addEventListener("DOMContentLoaded", checkAndFetchOnce);
  window.addEventListener("scroll", checkAndFetchOnce);
  setInterval(() => { fetchCricketLiveScores(true); }, 60000);
</script> -->

<script>
  setTimeout(() => {
    const container = document.getElementById('message-container');
    if (container) {
      container.style.opacity = '0';
      container.style.transition = 'opacity 1s ease';
      setTimeout(() => container.remove(), 1000); // Remove from DOM after fade
    }
  }, 4000); // 4 seconds

  // Smooth navbar transition functionality for home page
  let lastScrollTop = 0;
  const navbar = document.getElementById('main-navbar');
  const scrollThreshold = 192.864; // Show navbar after scrolling 100px
  
  // Add transition classes to navbar
  navbar.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
  navbar.style.transform = 'translateY(0)';
  navbar.style.opacity = '1';

  window.addEventListener('scroll', function() {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
    
    if (scrollTop > scrollThreshold) {
      // Smooth transition to fixed-like behavior
      navbar.style.position = 'fixed';
      navbar.style.top = '0';
      navbar.style.left = '0';
      navbar.style.right = '0';
      navbar.style.width = '100%';
      navbar.style.transform = 'translateY(0)';
      navbar.style.opacity = '1';
      // Smooth shadow transition
      navbar.style.boxShadow = '0 4px 20px 0px rgb(0 0 0 / 0.25)';
    } else {
      // Smooth transition back to sticky
      navbar.style.position = 'sticky';
      navbar.style.top = '0';
      navbar.style.transform = 'translateY(0)';
      navbar.style.opacity = '1';
      // Smooth shadow transition back
      navbar.style.boxShadow = '6px 4px 20px 0px rgb(0 0 0 / 0.20)';
    }
    
    lastScrollTop = scrollTop;
  });
</script>

{% endblock %}

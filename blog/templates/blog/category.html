{% extends 'blog/base.html' %}

{%block nav%}

<!-- Navigation Section -->
<nav id="cat-navbar" class="hidden md:block bg-white border-b border-gray-200 sticky top-0 z-40"
  style="box-shadow:6px 4px 20px 0px rgb(0 0 0 / 0.20)">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-around py-2">
      <!-- Search Bar -->
      <div class="flex items-center space-x-6">
        <div class="relative">
          <form method="GET" action="{% url 'home' %}" class="relative max-w-xs hidden md:flex">

            <input id="searchBox" type="text" name="q" placeholder="Search" value="{{ search_query }}"
              class="pl-10 pr-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-gray-300" />
            <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 text-black w-4 h-4" fill="none"
              stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </form>

          <div id="liveResults" class="absolute bg-white shadow-md rounded z-50"></div>
        </div>
      </div>




      <!-- Navigation Links -->
      <div class="flex items-center space-x-8 mr-[28rem]">
        <a href="{% url 'home' %}"
          class="{% if request.path == '/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 transition-colors group relative">
          Home
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a>

        <div class="relative group">
          <button
            class="{% if request.path == '/category/corporates/' or request.path == '/category/smes/' or request.path == '/category/b-ipo/' or request.path == '/category/startups/' %}text-red-600 font-semibold{% else %}text-black {% endif %} hover:text-red-600 font-medium transition-colors relative">Business
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'corporates' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Corporates
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'smes' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">SMEs
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'startups' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Startups
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>

            </div>
          </div>
        </div>

        <!-- <a href="{% url 'category_articles' 'business'  %}"
          class="{% if request.path == '/category/market/' or request.path == '/category/gold/' or request.path == '/category/business/' %}text-red-600 font-semibold{% else %}text-black {% endif %} hover:text-red-600 font-medium transition-colors group relative">Business
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a> -->

        <div class="relative group">
          <button
            class="{% if request.path == '/category/stock market/' or request.path == '/category/mutual funds/' or  request.path == '/category/ipo/' or request.path == '/category/policy/' or request.path == '/category/budget/' or request.path == '/category/taxation/' or request.path == '/category/economy/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">Finance
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'stock market' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Stock
                Market
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'mutual funds' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Mutual
                Funds
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'ipo' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">IPO
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'economy' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Economy
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'policy' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Policy
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'budget' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Budget
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'taxation' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Taxation
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>

            </div>
          </div>
        </div>

        <!-- <a href="{% url 'category_articles' 'economy' %}"
          class="{% if request.path == '/category/economy/' %}:text-red-600 font-semibold{% else %}text-black{% endif %}hover:text-red-600 font-medium transition-colors group relative">Economy
          <span
            class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
        </a> -->

        <div class="relative group">
          <button
            class="{% if request.path == '/category/cricket/' or request.path == '/category/football/' or  request.path == '/category/tennis/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">Sports
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'cricket' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Cricket
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'football' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Football
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'tennis' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Tennis
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
            </div>
          </div>
        </div>

        <div class="relative group">
          <button
            class="{% if request.path == '/category/fintech/' or request.path == '/category/banking/' or  request.path == '/category/defense/' or request.path == '/category/aviation' or request.path == '/category/hospitality' or request.path == '/category/real estate' or request.path == '/category/space/' %}text-red-600 font-semibold{% else %}text-black{% endif %} hover:text-red-600 font-medium transition-colors relative">Sectors
            <span
              class="absolute left-0 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover:w-full"></span>
          </button>
          <div
            class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="py-2">
              <a href="{% url 'category_articles' 'fintech' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Fintech
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'banking' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Banking
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'defense' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Defense
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'aviation' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Aviation
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'hospitality' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Hospitality
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'real estate' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Real
                Estate
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
              <a href="{% url 'category_articles' 'space' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-red-600 group/item relative">Space
                <span
                  class="absolute left-4 bottom-0 w-0 h-0.5 bg-red-600 transition-all duration-300 group-hover/item:w-12"></span>
              </a>
            </div>
          </div>
        </div>

      </div>



    </div>
  </div>
</nav>
{%endblock%}

{% block content %}

<section class="max-w-7xl mx-auto py-10 px-4">
  <h2 class="text-3xl   text-gray-900 mb-6 border-b-2 border-[#BA0000] pb-2">
    {{ category.name|capfirst }} News
  </h2>



  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% if featured %}
    <div class="">
      <div class="bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition duration-300">
        {% if featured.image %}
        <img src="{{ featured.image.url }}" alt="{{ featured.title }}" class="w-full h-64 object-cover">
        <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ featured.image_credit }}</div>
        {% endif %}
        <div class="p-6">
          <h3 class="text-2xl font-semibold text-black   hover:text-red-600 transition">
            <a href="{% url 'article_detail' slug=featured.slug %}">{{ featured.title }}</a>
          </h3>
          <p class="text-sm text-gray-600 mt-3">{{ featured.summary|safe|truncatechars:200 }}</p>
          <!-- author info -->
          <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-4 font-roboto ">
            {% if featured.authorImage %}
            <img src="{{ featured.authorImage.url }}" alt="{{ featured.author }}"
              class="w-6 h-6 rounded-full object-cover">
            {% endif %}
            <span class="text-gray-800">{{ featured.author|capfirst }}</span>
            <span>•</span>
            <span>{{ featured.created_at|date:"F j, Y" }}</span>
            <!-- {% if article.category %}
            <span>•</span>
            <span class="bg-red-600 text-white px-2 py-0.5 rounded-full text-xs uppercase tracking-wide font-semibold">
              {{ article.category }}
            </span>
            {% endif %} -->
          </div>
          <a href="{% url 'article_detail' slug=featured.slug %}"
            class="text-red-600 hover:text-black text-sm font-medium mt-4 inline-block">
            Read more →
          </a>
        </div>
      </div>
    </div>
    {% endif %}

    {% if others %}

    {% for article in others %}
    <div class="bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition duration-300">
      {% if article.image %}
      <img src="{{ article.image.url }}" alt="{{ article.title }}" class="w-full h-64 object-cover">
      <div class="image-credit text-xs text-gray-500 text-right px-2 py-1">{{ article.image_credit }}</div>
      {% endif %}
      <div class="p-4">
        <h3 class="text-lg font-semibold text-gray-900   hover:text-red-600 transition">
          <a href="{% url 'article_detail' slug=article.slug %}">{{ article.title }}</a>
        </h3>
        <p class="text-sm text-gray-600 mt-2">{{ article.summary|safe|truncatechars:120 }}</p>
        <!-- author info -->
        <div class="flex flex-wrap items-center text-sm text-gray-500 mt-6 space-x-4 font-roboto ">
          {% if article.authorImage %}
          <img src="{{ article.authorImage.url }}" alt="{{ article.author }}" class="w-6 h-6 rounded-full object-cover">
          {% endif %}
          <span class="text-gray-800">{{ article.author|capfirst }}</span>
          <span>•</span>
          <span>{{ article.created_at|date:"F j, Y" }}</span>
          <!-- {% if article.category %}
            <span>•</span>
            <span class="bg-red-600 text-white px-2 py-0.5 rounded-full text-xs uppercase tracking-wide font-semibold">
              {{ article.category }}
            </span>
            {% endif %} -->
        </div>
        <a href="{% url 'article_detail' slug=article.slug %}"
          class="text-red-600 hover:text-black text-sm font-medium mt-3 inline-block">
          Read more →
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <!-- <p class="text-gray-500 text-sm">No articles found in this category.</p> -->

  {% endif %}
</section>

{% endblock %}

<!-- <script>
  // Smooth navbar transition functionality for category page
  let lastScrollTop = 0;
  const navbar = document.getElementById('cat-navbar');
  const scrollThreshold = 192.864; // Show navbar after scrolling 100px

  // Add transition classes to navbar
  navbar.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
  navbar.style.transform = 'translateY(0)';
  navbar.style.opacity = '1';

  window.addEventListener('scroll', function () {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop > scrollThreshold) {
      // Smooth transition to fixed-like behavior
      navbar.style.position = 'fixed';
      navbar.style.top = '0';
      navbar.style.left = '0';
      navbar.style.right = '0';
      navbar.style.width = '100%';
      navbar.style.transform = 'translateY(0)';
      navbar.style.opacity = '1';
      // Smooth shadow transition
      navbar.style.boxShadow = '0 4px 20px 0px rgb(0 0 0 / 0.25)';
    } else {
      // Smooth transition back to sticky
      navbar.style.position = 'sticky';
      navbar.style.top = '0';
      navbar.style.transform = 'translateY(0)';
      navbar.style.opacity = '1';
      // Smooth shadow transition back
      navbar.style.boxShadow = '6px 4px 20px 0px rgb(0 0 0 / 0.20)';
    }

    lastScrollTop = scrollTop;
  });

</script> -->
